<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¸ìƒ ìŠ¤í‚¬ íŠ¸ë¦¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse-glow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse-glow {
            animation: pulse-glow 2s ease-in-out infinite;
        }
        .hexagon {
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
        }
        .connection-line {
            position: absolute;
            height: 2px;
            transform-origin: left center;
            transition: all 0.3s;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-950 via-slate-900 to-zinc-950 min-h-screen">
    <div class="max-w-7xl mx-auto p-8">
        <!-- í—¤ë” -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-amber-200 via-yellow-300 to-amber-200 mb-2">
                ì¸ìƒ ìŠ¤í‚¬ íŠ¸ë¦¬
            </h1>
            <p class="text-gray-400 text-lg">ë¿Œë¦¬ë¶€í„° ê°€ì§€ê¹Œì§€, ë‚˜ì˜ ì„±ì¥ ì—¬ì •</p>
        </div>

        <!-- í…Œë§ˆ ì„ íƒ -->
        <div class="flex justify-center gap-3 mb-6">
            <button onclick="changeTheme('yggdrasil')" class="theme-btn px-5 py-2.5 rounded-xl font-semibold transition-all bg-gradient-to-r from-amber-400 to-yellow-500 text-gray-900 shadow-lg shadow-amber-500/30 scale-105">
                ì„¸ê³„ìˆ˜
            </button>
            <button onclick="changeTheme('galaxy')" class="theme-btn px-5 py-2.5 rounded-xl font-semibold transition-all bg-white/10 text-white hover:bg-white/20 backdrop-blur-sm border border-white/10">
                ì€í•˜ìˆ˜
            </button>
            <button onclick="changeTheme('cyber')" class="theme-btn px-5 py-2.5 rounded-xl font-semibold transition-all bg-white/10 text-white hover:bg-white/20 backdrop-blur-sm border border-white/10">
                ì‚¬ì´ë²„
            </button>
            <button onclick="changeTheme('nature')" class="theme-btn px-5 py-2.5 rounded-xl font-semibold transition-all bg-white/10 text-white hover:bg-white/20 backdrop-blur-sm border border-white/10">
                ìì—°
            </button>
        </div>

        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <!-- ì™¼ìª½: í†µê³„ -->
            <div class="space-y-6">
                <!-- ì „ì²´ ì§„í–‰ë¥  -->
                <div class="bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50 shadow-xl">
                    <h2 class="text-white text-xl font-bold mb-4 flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-blue-500 to-purple-500 flex items-center justify-center">ğŸ“Š</div>
                        ì „ì²´ ì§„í–‰ë¥ 
                    </h2>
                    <div class="text-center mb-4">
                        <div id="total-percentage" class="text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-purple-500 mb-2">
                            35.7%
                        </div>
                        <div id="total-count" class="text-sm text-gray-400">10 / 28 ì·¨ë“</div>
                        <div id="recommended-count" class="text-xs text-amber-400 mt-2">ğŸ’¡ ì¶”ì²œ ìê²©ì¦ 9ê°œ</div>
                    </div>
                    <div class="w-full bg-gray-700/50 rounded-full h-3 overflow-hidden">
                        <div id="total-progress-bar" class="h-3 bg-gradient-to-r from-blue-500 via-purple-500 to-pink-500 transition-all duration-500 shadow-lg" style="width: 35.7%">
                        </div>
                    </div>
                </div>

                <!-- í•™ì—… -->
                <div class="bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50 shadow-xl">
                    <h2 class="text-white text-xl font-bold mb-4 flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-indigo-500 to-purple-500 flex items-center justify-center">ğŸ“š</div>
                        í•™ì—…
                    </h2>
                    <div class="text-center mb-3">
                        <div class="text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-indigo-400 to-purple-500">
                            3.2
                        </div>
                        <div class="text-sm text-gray-400 mt-1">/ 4.5</div>
                    </div>
                    <div class="w-full bg-gray-700/50 rounded-full h-3 overflow-hidden">
                        <div class="h-3 bg-gradient-to-r from-indigo-500 to-purple-500 transition-all shadow-lg" style="width: 71.1%">
                        </div>
                    </div>
                </div>

                <!-- ë¶„ì•¼ë³„ ì—­ëŸ‰ -->
                <div class="bg-gradient-to-br from-gray-900/90 to-gray-800/90 backdrop-blur-xl rounded-2xl p-6 border border-gray-700/50 shadow-xl">
                    <h2 class="text-white text-xl font-bold mb-4 flex items-center gap-2">
                        <div class="w-8 h-8 rounded-lg bg-gradient-to-br from-amber-500 to-orange-500 flex items-center justify-center">ğŸ¯</div>
                        ë¶„ì•¼ë³„ ì—­ëŸ‰
                    </h2>
                    <div id="category-stats" class="space-y-4">
                    </div>
                </div>
            </div>

            <!-- ì¤‘ì•™: ìŠ¤í‚¬ íŠ¸ë¦¬ -->
            <div class="lg:col-span-2">
                <div class="bg-gradient-to-br from-gray-900/50 to-gray-800/50 backdrop-blur-sm rounded-2xl p-8 border border-gray-700/30 relative shadow-2xl" style="min-height: 900px">
                    <!-- SVG ì—°ê²°ì„  -->
                    <svg id="connections-svg" class="absolute inset-0 w-full h-full pointer-events-none" style="z-index: 0"></svg>
                    
                    <!-- ë…¸ë“œ ì»¨í…Œì´ë„ˆ -->
                    <div id="skill-nodes" class="relative w-full h-full"></div>

                    <!-- ì¤‘ì•™ ë¿Œë¦¬ -->
                    <div class="absolute left-1/2 bottom-12 transform -translate-x-1/2" style="z-index: 10">
                        <div class="relative w-24 h-24">
                            <div class="hexagon w-full h-full bg-gradient-to-br from-amber-400 to-yellow-600 border-4 border-amber-400 shadow-2xl shadow-amber-500/50 flex items-center justify-center">
                                <div class="text-center relative z-10">
                                    <div class="text-4xl mb-1">ğŸŒ±</div>
                                    <div class="text-white font-bold text-sm">ì¸ìƒ</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="text-center text-gray-500 text-sm mt-8 space-y-1">
            <p>ğŸ’¡ ë…¸ë“œë¥¼ í´ë¦­í•˜ì—¬ ìƒì„¸ì •ë³´ í™•ì¸ ë° ì·¨ë“ ìƒíƒœë¥¼ ë³€ê²½í•˜ì„¸ìš”</p>
            <p>ğŸ”’ ì´ì „ ë‹¨ê³„ë¥¼ ì™„ë£Œí•´ì•¼ ë‹¤ìŒ ìê²©ì¦ì´ ì ê¸ˆ í•´ì œë©ë‹ˆë‹¤</p>
            <p class="text-amber-400">âš¡ ì ì„  í…Œë‘ë¦¬ì™€ ëŠë‚Œí‘œëŠ” ì¶”ì²œ ìê²©ì¦ì…ë‹ˆë‹¤</p>
        </div>
    </div>

    <!-- ìƒì„¸ ì •ë³´ ëª¨ë‹¬ -->
    <div id="detail-modal" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
        <div class="bg-gradient-to-br from-gray-900 to-gray-800 rounded-xl p-6 shadow-2xl w-full max-w-md border border-gray-700">
            <div class="flex items-center gap-3 mb-4">
                <div id="modal-icon" class="w-12 h-12 rounded-lg flex items-center justify-center text-2xl">
                </div>
                <div>
                    <h3 id="modal-title" class="font-bold text-xl text-white"></h3>
                    <div id="modal-subtitle" class="text-xs text-gray-400"></div>
                </div>
            </div>
            
            <div id="modal-recommended" class="hidden mb-4 px-3 py-2 bg-amber-500/20 border border-amber-500/50 rounded-lg">
                <div class="text-amber-300 text-xs font-semibold">ğŸ’¡ ì¶”ì²œ ìê²©ì¦</div>
                <div class="text-amber-200/80 text-xs mt-1">ë‹¹ì‹ ì˜ ê²½ë ¥ì— ë„ì›€ì´ ë  ìê²©ì¦ì…ë‹ˆë‹¤</div>
            </div>

            <div class="border-t border-gray-700 pt-4 mb-4">
                <label class="text-xs text-gray-400 block mb-1">ì·¨ë“ì¼</label>
                <input id="modal-date" type="date" class="w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:border-gray-500">
            </div>

            <div class="flex gap-3">
                <button id="modal-toggle" class="flex-1 py-2.5 rounded-lg font-semibold text-sm transition-all">
                    ì·¨ë“í•˜ê¸°
                </button>
                <button onclick="closeModal()" class="px-6 py-2.5 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-semibold text-sm transition-all">
                    ë‹«ê¸°
                </button>
            </div>
        </div>
    </div>

    <script>
        const categories = {
            language: { name: 'ì–´í•™', color: '#3b82f6', gradient: 'from-blue-400 to-cyan-400', icon: 'ğŸŒ' },
            trade: { name: 'ë¬´ì—­/ìœ í†µ', color: '#8b5cf6', gradient: 'from-purple-400 to-pink-400', icon: 'ğŸ“¦' },
            it: { name: 'IT/ì •ë³´', color: '#10b981', gradient: 'from-emerald-400 to-teal-400', icon: 'ğŸ’»' },
            communication: { name: 'í†µì‹ ', color: '#f59e0b', gradient: 'from-amber-400 to-orange-400', icon: 'ğŸ“¡' },
            safety: { name: 'ì•ˆì „/ìœ„í—˜ë¬¼', color: '#ef4444', gradient: 'from-red-400 to-rose-400', icon: 'âš ï¸' },
            office: { name: 'ì‚¬ë¬´', color: '#ec4899', gradient: 'from-pink-400 to-fuchsia-400', icon: 'ğŸ“‹' },
        };

        const themes = {
            yggdrasil: { bg: 'from-slate-950 via-slate-900 to-zinc-950' },
            galaxy: { bg: 'from-indigo-950 via-purple-950 to-pink-950' },
            cyber: { bg: 'from-black via-gray-950 to-zinc-950' },
            nature: { bg: 'from-sky-950 via-blue-900 to-indigo-950' }
        };

        let currentTheme = 'yggdrasil';
        let selectedSkillId = null;

        const skills = {
            toeic965: { name: 'TOEIC 965', completed: true, date: '', category: 'language', level: 3, prereq: null },
            tradeEng1: { name: 'ë¬´ì—­ì˜ì–´ 1ê¸‰', completed: true, date: '', category: 'trade', level: 3, prereq: null },
            tradeMaster2: { name: 'êµ­ì œë¬´ì—­ì‚¬ 2ê¸‰', completed: true, date: '', category: 'trade', level: 2, prereq: null },
            distribution2: { name: 'ìœ í†µê´€ë¦¬ì‚¬ 2ê¸‰', completed: true, date: '', category: 'trade', level: 2, prereq: null },
            tradeMaster1: { name: 'êµ­ì œë¬´ì—­ì‚¬ 1ê¸‰', completed: false, date: '', category: 'trade', level: 4, prereq: 'tradeMaster2', recommended: true },
            logisticsMgr: { name: 'ë¬¼ë¥˜ê´€ë¦¬ì‚¬', completed: false, date: '', category: 'trade', level: 4, prereq: 'distribution2', recommended: true },
            customsAgent: { name: 'ê´€ì„¸ì‚¬', completed: false, date: '', category: 'trade', level: 5, prereq: 'logisticsMgr', recommended: true },
            originMgr: { name: 'ì›ì‚°ì§€ê´€ë¦¬ì‚¬', completed: false, date: '', category: 'trade', level: 4, prereq: 'tradeMaster1', recommended: true },
            wordProcessor: { name: 'ì›Œë“œí”„ë¡œì„¸ì„œ', completed: true, date: '', category: 'it', level: 1, prereq: null },
            sqld: { name: 'SQLD', completed: false, date: '', category: 'it', level: 2, prereq: 'wordProcessor', recommended: true },
            adsp: { name: 'ADsP', completed: false, date: '', category: 'it', level: 3, prereq: 'sqld', recommended: true },
            bigdata: { name: 'ë¹…ë°ì´í„°ë¶„ì„ê¸°ì‚¬', completed: false, date: '', category: 'it', level: 4, prereq: 'adsp', recommended: true },
            infoProcTech: { name: 'ì •ë³´ì²˜ë¦¬ê¸°ëŠ¥ì‚¬', completed: true, date: '', category: 'it', level: 1, prereq: null },
            infoProcEng: { name: 'ì •ë³´ì²˜ë¦¬ì‚°ì—…ê¸°ì‚¬', completed: false, date: '', category: 'it', level: 2, prereq: 'infoProcTech' },
            infoProcPro: { name: 'ì •ë³´ì²˜ë¦¬ê¸°ì‚¬', completed: false, date: '', category: 'it', level: 3, prereq: 'infoProcEng' },
            landRadio: { name: 'ìœ¡ìƒë¬´ì„ í†µì‹ ì‚¬', completed: true, date: '', category: 'communication', level: 2, prereq: null },
            seaRadio: { name: 'í•´ìƒë¬´ì„ í†µì‹ ì‚¬', completed: true, date: '', category: 'communication', level: 2, prereq: null },
            hazardTech: { name: 'ìœ„í—˜ë¬¼ê¸°ëŠ¥ì‚¬', completed: true, date: '', category: 'safety', level: 1, prereq: null },
            hazardEng: { name: 'ìœ„í—˜ë¬¼ì‚°ì—…ê¸°ì‚¬', completed: false, date: '', category: 'safety', level: 2, prereq: 'hazardTech' },
            safetyMgr: { name: 'ì‚°ì—…ì•ˆì „ê¸°ì‚¬', completed: false, date: '', category: 'safety', level: 3, prereq: 'hazardEng', recommended: true },
            gasEng: { name: 'ê°€ìŠ¤ê¸°ì‚¬', completed: false, date: '', category: 'safety', level: 3, prereq: 'hazardEng' },
            secretary2: { name: 'ë¹„ì„œ 2ê¸‰', completed: true, date: '', category: 'office', level: 2, prereq: null },
            secretary1: { name: 'ë¹„ì„œ 1ê¸‰', completed: false, date: '', category: 'office', level: 3, prereq: 'secretary2', recommended: true },
            humanResource: { name: 'ì¸ì ìì›ê´€ë¦¬ì‚¬', completed: false, date: '', category: 'office', level: 3, prereq: 'secretary2', recommended: true },
        };

        const nodePositions = {
            toeic965: { x: 15, y: 15 },
            tradeEng1: { x: 12, y: 30 },
            tradeMaster2: { x: 8, y: 42 },
            tradeMaster1: { x: 5, y: 54 },
            distribution2: { x: 18, y: 52 },
            logisticsMgr: { x: 15, y: 64 },
            customsAgent: { x: 12, y: 76 },
            originMgr: { x: 22, y: 66 },
            wordProcessor: { x: 35, y: 72 },
            sqld: { x: 32, y: 60 },
            adsp: { x: 28, y: 48 },
            bigdata: { x: 25, y: 36 },
            infoProcTech: { x: 42, y: 62 },
            infoProcEng: { x: 40, y: 50 },
            infoProcPro: { x: 38, y: 38 },
            landRadio: { x: 58, y: 62 },
            seaRadio: { x: 60, y: 50 },
            hazardTech: { x: 68, y: 72 },
            hazardEng: { x: 72, y: 60 },
            safetyMgr: { x: 78, y: 52 },
            gasEng: { x: 75, y: 44 },
            secretary2: { x: 82, y: 35 },
            secretary1: { x: 85, y: 25 },
            humanResource: { x: 88, y: 42 },
        };

        const connections = [
            ['tradeMaster2', 'tradeMaster1'],
            ['distribution2', 'logisticsMgr'],
            ['logisticsMgr', 'customsAgent'],
            ['tradeMaster1', 'originMgr'],
            ['infoProcTech', 'infoProcEng'],
            ['infoProcEng', 'infoProcPro'],
            ['wordProcessor', 'sqld'],
            ['sqld', 'adsp'],
            ['adsp', 'bigdata'],
            ['hazardTech', 'hazardEng'],
            ['hazardEng', 'gasEng'],
            ['hazardEng', 'safetyMgr'],
            ['secretary2', 'secretary1'],
            ['secretary2', 'humanResource'],
        ];

        function isUnlocked(skillId) {
            const skill = skills[skillId];
            if (!skill.prereq) return true;
            return skills[skill.prereq].completed;
        }

        function updateStats() {
            const total = Object.keys(skills).length;
            const completed = Object.values(skills).filter(s => s.completed).length;
            const recommended = Object.values(skills).filter(s => s.recommended && !s.completed).length;
            const percentage = ((completed / total) * 100).toFixed(1);

            document.getElementById('total-percentage').textContent = percentage + '%';
            document.getElementById('total-count').textContent = `${completed} / ${total} ì·¨ë“`;
            document.getElementById('recommended-count').textContent = `ğŸ’¡ ì¶”ì²œ ìê²©ì¦ ${recommended}ê°œ`;
            document.getElementById('total-progress-bar').style.width = percentage + '%';

            // ë¶„ì•¼ë³„ í†µê³„
            const categoryStats = {};
            Object.entries(categories).forEach(([key, cat]) => {
                const catSkills = Object.values(skills).filter(s => s.category === key);
                const completed = catSkills.filter(s => s.completed).length;
                const total = catSkills.length;
                categoryStats[cat.name] = { completed, total, percentage: total > 0 ? (completed / total * 100) : 0, cat };
            });

            const statsHtml = Object.entries(categoryStats).map(([name, stat]) => `
                <div>
                    <div class="flex justify-between mb-2">
                        <span class="text-white text-sm font-semibold flex items-center gap-2">
                            <span class="text-lg">${stat.cat.icon}</span>
                            ${name}
                        </span>
                        <span class="text-gray-400 text-sm font-mono">
                            ${stat.completed}/${stat.total}
                        </span>
                    </div>
                    <div class="w-full bg-gray-700/50 rounded-full h-2.5 overflow-hidden">
                        <div class="h-2.5 bg-gradient-to-r ${stat.cat.gradient} transition-all shadow-lg" style="width: ${stat.percentage}%"></div>
                    </div>
                </div>
            `).join('');

            document.getElementById('category-stats').innerHTML = statsHtml;
        }

        function renderConnections() {
            const svg = document.getElementById('connections-svg');
            const containerRect = svg.getBoundingClientRect();
            
            let svgContent = '';
            connections.forEach(([from, to]) => {
                const fromPos = nodePositions[from];
                const toPos = nodePositions[to];
                const skill = skills[to];
                const unlocked = isUnlocked(to);
                const category = categories[skill.category];

                if (fromPos && toPos) {
                    const x1 = (fromPos.x / 100) * containerRect.width;
                    const y1 = (fromPos.y / 100) * containerRect.height;
                    const x2 = (toPos.x / 100) * containerRect.width;
                    const y2 = (toPos.y / 100) * containerRect.height;

                    svgContent += `
                        <line 
                            x1="${x1}" y1="${y1}" 
                            x2="${x2}" y2="${y2}" 
                            stroke="${category.color}" 
                            stroke-width="2" 
                            opacity="${unlocked ? 0.5 : 0.15}"
                            stroke-dasharray="${unlocked ? '0' : '4,4'}"
                        />
                    `;
                }
            });
            svg.innerHTML = svgContent;
        }

        function renderNodes() {
            const container = document.getElementById('skill-nodes');
            container.innerHTML = '';

            Object.entries(skills).forEach(([skillId, skill]) => {
                const pos = nodePositions[skillId];
                if (!pos) return;

                const unlocked = isUnlocked(skillId);
                const category = categories[skill.category];

                const node = document.createElement('div');
                node.className = 'absolute transform -translate-x-1/2 -translate-y-1/2 cursor-pointer group';
                node.style.left = pos.x + '%';
                node.style.top = pos.y + '%';

                const borderStyle = skill.completed 
                    ? 'border-4 border-amber-400 shadow-2xl shadow-amber-500/50' 
                    : unlocked 
                        ? `border-2 ${skill.recommended ? 'border-dashed' : ''} group-hover:scale-110` 
                        : 'border-2 border-gray-600 opacity-40';

                const bgStyle = skill.completed 
                    ? 'bg-gradient-to-br from-amber-400 to-yellow-600' 
                    : unlocked 
                        ? `bg-${category.color}/25` 
                        : 'bg-gray-800';

                node.innerHTML = `
                    <div class="relative">
                        <div class="hexagon w-16 h-16 ${bgStyle} ${borderStyle} flex items-center justify-center transition-all duration-300" style="border-color: ${unlocked ? category.color : '#4b5563'}">
                            <div class="text-2xl relative z-10">
                                ${skill.completed ? 'âœ¨' : unlocked ? category.icon : 'ğŸ”’'}
                            </div>
                        </div>
                        ${skill.recommended && !skill.completed && unlocked ? `
                            <div class="absolute -top-3 -right-3 w-6 h-6 rounded-full bg-gradient-to-br from-yellow-400 to-amber-500 flex items-center justify-center shadow-lg animate-pulse-glow">
                                <span class="text-white text-xs font-bold">!</span>
                            </div>
                        ` : ''}
                        <div class="absolute -top-1 -right-1 w-7 h-7 rounded-full flex items-center justify-center text-white text-xs font-bold shadow-lg bg-gradient-to-br ${category.gradient}">
                            ${skill.level}
                        </div>
                        <div class="absolute top-20 left-1/2 transform -translate-x-1/2 text-white text-center text-xs font-semibold whitespace-nowrap px-3 py-1.5 rounded-lg backdrop-blur-sm border ${
                            skill.recommended && !skill.completed ? 'bg-amber-900/70 border-amber-500/50' : 'bg-black/70 border-white/10'
                        }">
                            ${skill.name}
                        </div>
                    </div>
                `;

                if (unlocked) {
                    node.onclick = () => openModal(skillId);
                }

                container.appendChild(node);
            });
        }

        function openModal(skillId) {
            selectedSkillId = skillId;
            const skill = skills[skillId];
            const category = categories[skill.category];

            document.getElementById('modal-icon').innerHTML = category.icon;
            document.getElementById('modal-icon').className = `w-12 h-12 rounded-lg bg-gradient-to-br ${category.gradient} flex items-center justify-center text-2xl`;
            document.getElementById('modal-title').textContent = skill.name;
            document.getElementById('modal-subtitle').textContent = `${category.name} Â· Level ${skill.level}`;
            document.getElementById('modal-date').value = skill.date;
            document.getElementById('modal-date').disabled = !skill.completed;

            const recommendedDiv = document.getElementById('modal-recommended');
            if (skill.recommended && !skill.completed) {
                recommendedDiv.classList.remove('hidden');
            } else {
                recommendedDiv.classList.add('hidden');
            }

            const toggleBtn = document.getElementById('modal-toggle');
            toggleBtn.textContent = skill.completed ? 'âœ“ ì·¨ë“ì™„ë£Œ' : 'ì·¨ë“í•˜ê¸°';
            toggleBtn.className = skill.completed 
                ? 'flex-1 py-2.5 rounded-lg font-semibold text-sm transition-all bg-gradient-to-r from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/30'
                : `flex-1 py-2.5 rounded-lg font-semibold text-sm transition-all bg-gradient-to-r ${category.gradient} text-white shadow-lg`;
            
            toggleBtn.onclick = () => toggleComplete(skillId);

            document.getElementById('detail-modal').classList.remove('hidden');
        }

        function closeModal() {
            document.getElementById('detail-modal').classList.add('hidden');
            selectedSkillId = null;
        }

        function toggleComplete(skillId) {
            skills[skillId].completed = !skills[skillId].completed;
            updateStats();
            renderConnections();
            renderNodes();
            openModal(skillId);
        }

        document.getElementById('modal-date').addEventListener('change', (e) => {
            if (selectedSkillId) {
                skills[selectedSkillId].date = e.target.value;
            }
        });

        function changeTheme(theme) {
            currentTheme = theme;
            document.body.className = `bg-gradient-to-br ${themes[theme].bg} min-h-screen`;
            
            document.querySelectorAll('.theme-btn').forEach((btn, idx) => {
                const themeKeys = Object.keys(themes);
                if (themeKeys[idx] === theme) {
                    btn.className = 'theme-btn px-5 py-2.5 rounded-xl font-semibold transition-all bg-gradient-to-r from-amber-400 to-yellow-500 text-gray-900 shadow-lg shadow-amber-500/30 scale-105';
                } else {
                    btn.className = 'theme-btn px-5 py-2.5 rounded-xl font-semibold transition-all bg-white/10 text-white hover:bg-white/20 backdrop-blur-sm border border-white/10';
                }
            });
        }

        // ì´ˆê¸°í™”
        updateStats();
        renderConnections();
        renderNodes();

        // ìœˆë„ìš° ë¦¬ì‚¬ì´ì¦ˆ ì‹œ ì—°ê²°ì„  ë‹¤ì‹œ ê·¸ë¦¬ê¸°
        window.addEventListener('resize', renderConnections);
    </script>
</body>
</html>
